{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Mike/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Mike/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Mike/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState,useEffect}from\"react\";import AudioPlayer from\"../meetstructure/AudioPlayer\";import{useParams}from\"react-router-dom\";import{UserContext}from\"../../../UserContext\";import findUser from\"../../../axios-api\";import io from\"socket.io-client\";import BsCheckAll from\"react-icons/bs\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){var _otherUser$topTrack,_otherUser$topTrack2,_otherUser$topTrack3,_otherUser$topTrack4;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),otherUser=_useState2[0],setOtherUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFollowing=_useState4[0],setIsFollowing=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),socketOn=_useState6[0],setSocketOn=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),messageSent=_useState10[0],setMessageSent=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),messageReceived=_useState12[0],setMessageReceived=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),room=_useState14[0],setRoom=_useState14[1];var _useParams=useParams(),id=_useParams.id;var user=useContext(UserContext);var email=user.email;// const socket = io.connect(\"http://localhost:3001\")\nvar roomNum=id+user.id;// const sendMessage = () => {\n//     setRoom(roomNum)\n//     console.log(room)\n//     socket.emit(\"send_message\", {message})\n//     socket.emit(\"join_room\", {room})\n//     if(message!=\"\"){\n//         setMessageSent(true)\n//         console.log(\"message sent!\")\n//     }\n//     setMessage(\"\")\n// }\n// const receiveMessage = () => {\n//     socket.emit(\"receive_message\", {data})\n// }\nuseEffect(function(){var timeId=setTimeout(function(){setMessageSent(false);},3000);return function(){clearTimeout(timeId);};},[message]);// useEffect(()=>{\n//     socket.on(\"receive_message\", (data) => {\n//         setMessageReceived(data.message)\n//         console.log(messageReceived)\n//     })\n// },[socket])\nvar getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return findUser.get(\"/users/\".concat(id));case 3:response=_context.sent;data=response.data;setOtherUser(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getUser(){return _ref.apply(this,arguments);};}();useEffect(function(){var isCancelled=false;if(!isCancelled){getUser();}return function(){isCancelled=true;};},[]);var HandleFollowButton=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setIsFollowing(!isFollowing);_context2.prev=1;_context2.next=4;return findUser.post('/users',{email:\"mikedamadmanmadden11@yahoo.com\",following:\"jjjjjjjjjjjj\"});case 4:console.log(user.email);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[1,7]]);}));return function HandleFollowButton(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:otherUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"profile-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"img\",{src:otherUser.photo,className:\"profile-photo\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"h1\",{children:otherUser.name}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-from-follow\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"From \",otherUser.country==\"US\"?\"USA\":otherUser.country]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"track\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[otherUser.name,\"'s Top Song\"]}),/*#__PURE__*/_jsx(\"img\",{className:\"my-top-five-album-cover\",src:(_otherUser$topTrack=otherUser.topTrack)===null||_otherUser$topTrack===void 0?void 0:_otherUser$topTrack.albumCover}),/*#__PURE__*/_jsx(\"div\",{className:\"song-info\",children:/*#__PURE__*/_jsx(AudioPlayer,{preview:(_otherUser$topTrack2=otherUser.topTrack)===null||_otherUser$topTrack2===void 0?void 0:_otherUser$topTrack2.preview,songName:(_otherUser$topTrack3=otherUser.topTrack)===null||_otherUser$topTrack3===void 0?void 0:_otherUser$topTrack3.song,artist:(_otherUser$topTrack4=otherUser.topTrack)===null||_otherUser$topTrack4===void 0?void 0:_otherUser$topTrack4.artist})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"top-artist\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[otherUser.name,\"'s Top Artist\"]}),/*#__PURE__*/_jsx(\"img\",{className:\"my-top-five-album-cover\",src:otherUser.artistImage}),/*#__PURE__*/_jsx(\"li\",{children:otherUser.artist})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[otherUser.name,\"'s Top Genres\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"genre-tag\",children:otherUser.genre[0]}),/*#__PURE__*/_jsx(\"div\",{className:\"genre-tag\",children:otherUser.genre[1]})]})]})]})});}","map":{"version":3,"names":["React","useContext","useState","useEffect","AudioPlayer","useParams","UserContext","findUser","io","BsCheckAll","axios","Profile","otherUser","setOtherUser","isFollowing","setIsFollowing","socketOn","setSocketOn","message","setMessage","messageSent","setMessageSent","messageReceived","setMessageReceived","room","setRoom","id","user","email","roomNum","timeId","setTimeout","clearTimeout","getUser","get","response","data","console","log","isCancelled","HandleFollowButton","post","following","photo","name","country","topTrack","albumCover","preview","song","artist","artistImage","genre"],"sources":["C:/Users/Mike/my-app/client/src/components/pages/meetpages/Profile.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\"\r\nimport AudioPlayer from \"../meetstructure/AudioPlayer\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { UserContext } from \"../../../UserContext\"\r\nimport findUser from \"../../../axios-api\"\r\nimport io from \"socket.io-client\"\r\nimport BsCheckAll from \"react-icons/bs\"\r\nimport axios from \"axios\"\r\n\r\n\r\nexport default function Profile(){\r\n    const [otherUser, setOtherUser] = useState(null)\r\n    const [isFollowing, setIsFollowing] = useState(false)\r\n    const [socketOn, setSocketOn] = useState(false)\r\n    const [message, setMessage] = useState(\"\")\r\n    const [messageSent, setMessageSent] = useState(false)\r\n    const [messageReceived, setMessageReceived] = useState(\"\")\r\n    const [room, setRoom] = useState(\"\")\r\n    \r\n    const { id } = useParams()\r\n    const user = useContext(UserContext)\r\n    const email = user.email\r\n    // const socket = io.connect(\"http://localhost:3001\")\r\n    const roomNum = id+user.id\r\n\r\n\r\n    // const sendMessage = () => {\r\n    //     setRoom(roomNum)\r\n    //     console.log(room)\r\n\r\n    //     socket.emit(\"send_message\", {message})\r\n    //     socket.emit(\"join_room\", {room})\r\n    //     if(message!=\"\"){\r\n    //         setMessageSent(true)\r\n    //         console.log(\"message sent!\")\r\n    //     }\r\n    //     setMessage(\"\")\r\n        \r\n    // }\r\n    // const receiveMessage = () => {\r\n    //     socket.emit(\"receive_message\", {data})\r\n    // }\r\n\r\n\r\n    useEffect(()=>{\r\n        const timeId = setTimeout(()=>{\r\n            setMessageSent(false)\r\n        }, 3000)\r\n\r\n        return () => {\r\n            clearTimeout(timeId)\r\n        }\r\n    }, [message])\r\n\r\n    // useEffect(()=>{\r\n    //     socket.on(\"receive_message\", (data) => {\r\n    //         setMessageReceived(data.message)\r\n    //         console.log(messageReceived)\r\n    //     })\r\n        \r\n    // },[socket])\r\n\r\n\r\n    const getUser = async() => {\r\n        try{\r\n            const response = await findUser.get(`/users/${id}`)\r\n            const data = response.data\r\n            setOtherUser(data)\r\n\r\n        } catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    useEffect(()=>{\r\n\r\n        let isCancelled = false\r\n\r\n        if(!isCancelled){\r\n            getUser()\r\n        }\r\n\r\n        return () => {\r\n            isCancelled = true\r\n        }\r\n\r\n\r\n    }, [])       \r\n  \r\n\r\n    const HandleFollowButton = async () => {\r\n        setIsFollowing(!isFollowing)\r\n        try{\r\n                await findUser.post('/users', {\r\n                email: \"mikedamadmanmadden11@yahoo.com\",\r\n                following: \"jjjjjjjjjjjj\"\r\n            })\r\n            console.log(user.email)\r\n\r\n        \r\n        } catch(e){\r\n            console.log(e)\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return(\r\n        \r\n        <div>\r\n            {otherUser && \r\n            <div className=\"profile-page\">\r\n                <div className=\"profile\"> \r\n                <img src={otherUser.photo} className=\"profile-photo\" alt=\"\"/>\r\n                <div className=\"user-info\">\r\n                    <h1>{otherUser.name}</h1>\r\n                    <div className=\"profile-from-follow\">\r\n                        <p>From {otherUser.country==\"US\" ? \"USA\" : otherUser.country}</p>\r\n                        {/* <div className=\"follow-chat-buttons\">\r\n                            <p className={isFollowing ? \"follow-button-selected\" : \"follow-button\"} onClick={HandleFollowButton}>{isFollowing ? \"Following\": \"Follow\"} </p>\r\n                        </div> */}\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                      <div className=\"profile-container\">\r\n                            <div className=\"track\">\r\n                            <h1>{otherUser.name}'s Top Song</h1>                        \r\n                                    <img className=\"my-top-five-album-cover\" src={otherUser.topTrack?.albumCover}/>\r\n                                    <div className=\"song-info\">\r\n                                        <AudioPlayer \r\n                                        preview={otherUser.topTrack?.preview}\r\n                                        songName={otherUser.topTrack?.song}\r\n                                        artist={otherUser.topTrack?.artist}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"top-artist\">\r\n                                    <h1>{otherUser.name}'s Top Artist</h1>\r\n                                    <img className=\"my-top-five-album-cover\" src={otherUser.artistImage}/>\r\n                                    <li>{otherUser.artist}</li>\r\n                                </div>\r\n                                <div>\r\n                                    <h1>{otherUser.name}'s Top Genres</h1> \r\n                                    <div className=\"genre-tag\">{otherUser.genre[0]}</div>\r\n                                    <div className=\"genre-tag\">{otherUser.genre[1]}</div>\r\n                                </div>\r\n                    </div>\r\n                    {/* <div className=\"profile-chat\">\r\n                        \r\n                        <h1>Send {otherUser.name} a message</h1>\r\n                        \r\n                        <div>\r\n                            <input placeholder=\"Recommend a song\" value={message} onChange={(e) => {\r\n                                setMessage(e.target.value)}}/>\r\n                                <button onClick={sendMessage} className=\"send-button\">Send</button>\r\n                            \r\n                        </div>\r\n                        {messageSent &&\r\n                            <h1>Message sent!</h1>}\r\n                            <div>\r\n                                {messageReceived}\r\n                                </div>\r\n                    \r\n                        \r\n                    </div> */}\r\n\r\n             </div>\r\n}\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}